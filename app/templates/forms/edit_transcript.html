<!-- Edit Transcript Form -->
<form hx-patch="/api/notes/{{ note.id }}" hx-target="#note-content-{{ note.id }}" hx-swap="outerHTML"
    hx-on::after-request="if(event.detail.successful) showToast('Transcript updated!', 'success')"
    class="p-6 rounded-xl" style="background-color: var(--color-bg-secondary);">
    <div class="flex items-center justify-between mb-4">
        <h3 class="text-sm font-semibold uppercase tracking-wide" style="color: var(--color-text-tertiary);">
            Edit Transcript
        </h3>
        <span class="text-xs px-2 py-1 rounded"
            style="background-color: var(--color-bg-tertiary); color: var(--color-text-tertiary);">
            Editing will trigger re-processing
        </span>
    </div>

    <textarea name="raw_transcript" rows="10" class="w-full p-4 rounded-lg border text-lg leading-relaxed resize-y"
        style="border-color: var(--color-border); background-color: var(--color-bg-primary); min-height: 200px;"
        placeholder="Enter transcript..." data-auto-resize autofocus>{{ note.raw_transcript }}</textarea>

    <div class="flex items-center justify-between mt-4">
        <p class="text-xs" style="color: var(--color-text-tertiary);">
            <svg class="w-4 h-4 inline-block mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            Summary, tag, and similar notes will be regenerated
        </p>

        <div class="flex items-center gap-2">
            <button type="button" hx-get="/web/notes/{{ note.id }}" hx-target="main"
                class="px-4 py-2 text-sm font-medium rounded-lg transition hover:opacity-80"
                style="background-color: var(--color-bg-tertiary); color: var(--color-text-secondary);">
                Cancel
            </button>
            <button type="submit"
                class="px-4 py-2 text-sm font-medium rounded-lg text-white transition hover:opacity-90 flex items-center gap-2"
                style="background-color: var(--color-accent-primary);">
                <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                </svg>
                Save Changes
            </button>
        </div>
    </div>
</form>
